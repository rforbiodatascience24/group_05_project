---
title: "03_augment"
format: html
editor: visual
---

## Load clean data

```{r}
data <- read_tsv(file = "../data/02_dat_clean.tsv")
```

### Create Early/Late onset group based on D1 Fever

```{r}
data <- data |> 
  mutate(onset = case_when(
    `Disease_onset_D1_highest_body_temperature[â„ƒ]` > 37.5 ~ "Early",
    TRUE ~ "Late"
  ))
```

### Sum of Basic_Diseases

```{r}
data <- data |> 
  mutate(Comorbidities_sum = rowSums(select(data, Hypertension_disease : Other_disease)))
```

### Save files

```{r}
# Save the data as a TSV file
clean_dir <- "../data"
tsv_file <- file.path(clean_dir, "03_data_augmented.tsv")

# Check if the directory exists, create it if not
if (!dir.exists(clean_dir)) {
  dir.create(clean_dir, recursive = TRUE) 
}
#write tsv data
write.table(data, file = tsv_file, sep = "\t", row.names = FALSE)
```
